---
import PriceCard from './PriceCard.astro';

const metals = [
  {
    name: 'Cobre N°1 — Cable Pelado',
    price: '$6.500',
    trend: 'up' as const,
    trendValue: '+3.1%',
    description: 'Cable de cobre limpio, sin recubrimiento',
    iconColor: '#F97316',
    iconBg: 'bg-orange-500/15',
    whatsappMessage: 'Hola, vi su web y quiero vender Cobre N°1 (cable pelado). ¿Cuál es el precio actual?',
  },
  {
    name: 'Cobre N°2 — Cable con Plástico',
    price: '$3.200',
    trend: 'up' as const,
    trendValue: '+1.8%',
    description: 'Cable de cobre con recubrimiento plástico',
    iconColor: '#EA580C',
    iconBg: 'bg-orange-600/15',
    whatsappMessage: 'Hola, vi su web y quiero vender Cobre N°2 (cable con plástico). ¿Cuál es el precio actual?',
  },
  {
    name: 'Perfil de Aluminio',
    price: '$1.900',
    trend: 'up' as const,
    trendValue: '+2.3%',
    description: 'Perfiles de ventana, puertas y marcos',
    iconColor: '#3B82F6',
    iconBg: 'bg-blue-500/15',
    whatsappMessage: 'Hola, vi su web y quiero vender Perfil de Aluminio. ¿Cuál es el precio actual?',
  },
  {
    name: 'Aluminio Duro',
    price: '$1.400',
    trend: 'stable' as const,
    trendValue: '0.0%',
    description: 'Piezas de aluminio macizo, industrial',
    iconColor: '#6366F1',
    iconBg: 'bg-indigo-500/15',
    whatsappMessage: 'Hola, vi su web y quiero vender Aluminio Duro. ¿Cuál es el precio actual?',
  },
  {
    name: 'Latas de Aluminio',
    price: '$900',
    trend: 'up' as const,
    trendValue: '+0.5%',
    description: 'Latas de bebida compactadas o sueltas',
    iconColor: '#22D3EE',
    iconBg: 'bg-cyan-500/15',
    whatsappMessage: 'Hola, vi su web y quiero vender Latas de Aluminio. ¿Cuál es el precio actual?',
  },
  {
    name: 'Radiadores de Cobre',
    price: '$3.800',
    trend: 'stable' as const,
    trendValue: '+0.2%',
    description: 'Radiadores de vehículo y climatización',
    iconColor: '#EF4444',
    iconBg: 'bg-red-500/15',
    whatsappMessage: 'Hola, vi su web y quiero vender Radiadores de Cobre. ¿Cuál es el precio actual?',
  },
  {
    name: 'Bronce',
    price: '$4.200',
    trend: 'up' as const,
    trendValue: '+1.5%',
    description: 'Piezas de bronce, válvulas, grifería',
    iconColor: '#F59E0B',
    iconBg: 'bg-amber-500/15',
    whatsappMessage: 'Hola, vi su web y quiero vender Bronce. ¿Cuál es el precio actual?',
  },
  {
    name: 'Baterías (Plomo)',
    price: '$300',
    trend: 'down' as const,
    trendValue: '-0.8%',
    description: 'Baterías de auto, camión y maquinaria',
    iconColor: '#8B5CF6',
    iconBg: 'bg-violet-500/15',
    whatsappMessage: 'Hola, vi su web y quiero vender Baterías. ¿Cuál es el precio actual?',
  },
];

const schemaOffers = metals.map(m => ({
  "@type": "Offer",
  "name": `Compra de ${m.name.split('—')[0].trim()}`,
  "price": m.price.replace('$', '').replace('.', ''),
  "priceCurrency": "CLP",
  "priceSpecification": {
    "@type": "UnitPriceSpecification",
    "price": m.price.replace('$', '').replace('.', ''),
    "priceCurrency": "CLP",
    "unitText": "kg"
  },
  "availability": "https://schema.org/InStock",
  "seller": {
    "@type": "Organization",
    "name": "Exportandes"
  }
}));
---

<section id="precios" class="section-wrapper relative">
  <!-- Background texture -->
  <div class="absolute inset-0 bg-slate-dark/50"></div>
  <div class="absolute inset-0 opacity-[0.02]" style="background-image: radial-gradient(circle at 1px 1px, rgba(255,255,255,0.15) 1px, transparent 0); background-size: 40px 40px;"></div>

  <div class="relative z-10 mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
    <!-- Section Header -->
    <div class="text-center mb-16">
      <span class="inline-block px-4 py-1.5 rounded-full glass text-sm text-accent-teal font-heading font-medium mb-4">
        Actualizado diariamente
      </span>
      <h2 class="text-3xl sm:text-4xl lg:text-5xl font-heading font-bold text-white mb-4">
        Lista de Precios <span class="text-gradient">Oficial</span>
      </h2>
      <p class="text-gray-400 text-lg max-w-2xl mx-auto">
        Precios por kilogramo en pesos chilenos. Válidos para la Región del Bio Bio.
        Contáctanos para volúmenes superiores a 1 tonelada.
      </p>
    </div>

    <!-- Price Grid -->
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-5">
      {metals.map((metal) => (
        <PriceCard {...metal} />
      ))}
    </div>

    <!-- Disclaimer -->
    <p class="text-center text-xs text-gray-600 mt-10">
      * Los precios pueden variar según volumen, calidad y condiciones del mercado internacional. Última actualización: Febrero 2026.
    </p>
  </div>

  <!-- Schema.org Offer Markup -->
  <script type="application/ld+json" set:html={JSON.stringify({
    "@context": "https://schema.org",
    "@type": "ItemList",
    "name": "Lista de Precios de Metales — Exportandes",
    "itemListElement": schemaOffers.map((offer, i) => ({
      "@type": "ListItem",
      "position": i + 1,
      "item": offer
    }))
  })} />
</section>
