---
interface FAQItem {
  question: string;
  answer: string;
}
interface Props {
  items: FAQItem[];
  title?: string;
}
const { items, title = 'Preguntas frecuentes' } = Astro.props;

const faqSchema = {
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": items.map(i => ({
    "@type": "Question",
    "name": i.question,
    "acceptedAnswer": { "@type": "Answer", "text": i.answer },
  })),
};
---

<section class="section bg-neutral">
  <div class="container-x max-w-3xl">
    <h2 class="text-3xl font-display font-bold text-base mb-10 text-center">{title}</h2>

    <div class="space-y-3">
      {items.map((faq, i) => (
        <details class="group card" id={`faq-${i}`}>
          <summary class="flex items-center justify-between gap-4 cursor-pointer list-none font-display font-semibold text-base text-sm select-none">
            {faq.question}
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="shrink-0 transition-transform group-open:rotate-45" aria-hidden="true"><path d="M12 5v14M5 12h14"/></svg>
          </summary>
          <p class="mt-3 text-sm text-base-light leading-relaxed">{faq.answer}</p>
        </details>
      ))}
    </div>
  </div>

  <script type="application/ld+json" set:html={JSON.stringify(faqSchema)} />
</section>
